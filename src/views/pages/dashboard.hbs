<!-- Hero Section -->
{{!-- <section id="hero" class="hero section light-background">
  <img src="/img/health/showcase-1.webp" alt="" data-aos="fade-in">

  <div class="container position-relative">
    <div class="welcome position-relative" data-aos="fade-down" data-aos-delay="100">
      <h2>Bienvenido al Sistema de Gestión</h2>
      <p>Usuario: <strong>{{user.username}}</strong> | Rol: <strong>{{user.role}}</strong></p>
    </div>

    <div class="content row gy-4">
      <div class="col-lg-4 d-flex align-items-stretch">
        <div class="why-box" data-aos="zoom-out" data-aos-delay="200">
          <h3>Gestión Integral</h3>
          <p>
            Sistema completo para la administración de consultorios médicos. 
            Gestione pacientes, turnos y obras sociales de manera eficiente.
          </p>
          <div class="text-center">
            <a href="#services" class="more-btn"><span>Ver Más</span> <i class="bi bi-chevron-right"></i></a>
          </div>
        </div>
      </div>

      <div class="col-lg-8 d-flex align-items-stretch">
        <div class="d-flex flex-column justify-content-center">
          <div class="row gy-4">

            <div class="col-xl-4 d-flex align-items-stretch">
              <div class="icon-box" data-aos="zoom-out" data-aos-delay="300">
                <i class="bi bi-people"></i>
                <h4><a href="/pacientes">Pacientes</a></h4>
                <p>Administre el registro completo de pacientes, historias clínicas y datos personales</p>
              </div>
            </div>

            <div class="col-xl-4 d-flex align-items-stretch">
              <div class="icon-box" data-aos="zoom-out" data-aos-delay="400">
                <i class="bi bi-calendar-check"></i>
                <h4><a href="/turnos">Turnos</a></h4>
                <p>Gestione la agenda médica, asigne turnos y controle las citas programadas</p>
              </div>
            </div>

            <div class="col-xl-4 d-flex align-items-stretch">
              <div class="icon-box" data-aos="zoom-out" data-aos-delay="500">
                <i class="bi bi-shield-plus"></i>
                <h4><a href="/obras-sociales">Obras Sociales</a></h4>
                <p>Administre obras sociales, planes de cobertura y datos de contacto</p>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section> --}}

<!-- Services Section -->
<section id="services" class="services section">
  {{!-- <div class="container section-title" data-aos="fade-up">
    <h2>Módulos del Sistema</h2>
    <p>Accesos rápidos a las principales funcionalidades</p>
  </div> --}}

  <div class="container">
    {{#if isAdmin}}
      <div class="alert alert-info d-flex align-items-center gap-2 mb-4" role="alert">
        <i class="bi bi-info-circle-fill"></i>
        <span>Seleccioná un médico antes de acceder a la gestión de pacientes o turnos para evitar cargar todo el padrón.</span>
        <button
          type="button"
          class="btn btn-outline-primary btn-sm ms-auto js-doctor-gate"
          data-target-url="/pacientes"
          data-module-label="continuar con la gestión">
          Seleccionar médico
        </button>
      </div>
    {{/if}}
    <div class="row gy-4">

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="100">
        <div class="service-item position-relative">
          <div class="icon">
            <i class="fas fa-user-injured fs-2 texpr text-primary"></i>
          </div>
          <a href="/pacientes"
             class="stretched-link{{#if isAdmin}} js-doctor-gate{{/if}}"
             {{#if isAdmin}}
             data-target-url="/pacientes"
             data-module-label="gestión de pacientes"
             {{/if}}>
            <h3>Gestión de Pacientes</h3>
          </a>
          <p>Registro completo de pacientes con datos personales, obra social y observaciones médicas. Búsqueda rápida por nombre, apellido o DNI.</p>
        </div>
      </div>

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
        <div class="service-item position-relative">
          <div class="icon">
            <i class="fas fa-calendar-alt fs-2 text-primary"></i>
          </div>
          <a href="/turnos"
             class="stretched-link{{#if isAdmin}} js-doctor-gate{{/if}}"
             {{#if isAdmin}}
             data-target-url="/turnos"
             data-module-label="agenda de turnos"
             {{/if}}>
            <h3>Agenda de Turnos</h3>
          </a>
          <p>Sistema completo de gestión de turnos médicos. Asigne, modifique y controle las citas. Filtros por fecha y estado.</p>
        </div>
      </div>

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
        <div class="service-item position-relative">
          <div class="icon">
            <i class="fas fa-heartbeat fs-2 text-primary"></i>
          </div>
          <a href="/obras-sociales" class="stretched-link">
            <h3>Obras Sociales</h3>
          </a>
          <p>Administración de obras sociales y planes de cobertura. Mantenga actualizada la información de contacto y padrones.</p>
        </div>
      </div>

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="400">
        <div class="service-item position-relative">
          <div class="icon">
            <i class="fas fa-file-medical fs-2 text-primary"></i>
          </div>
          <a href="#" class="stretched-link">
            <h3>Historias Clínicas</h3>
          </a>
          <p>Próximamente: Acceso completo a las historias clínicas de los pacientes con registro de consultas y diagnósticos.</p>
        </div>
      </div>

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="500">
        <div class="service-item position-relative">
          <div class="icon">
            <i class="fas fa-chart-line fs-2 text-primary"></i>
          </div>
          <a href="#" class="stretched-link">
            <h3>Estadísticas</h3>
          </a>
          <p>Próximamente: Dashboard con estadísticas y métricas del consultorio. Reportes de atención y seguimiento.</p>
        </div>
      </div>

      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="600">
        <div class="service-item position-relative">
          <div class="icon">
            <i class="fas fa-cog fs-2 text-primary"></i>
          </div>
          <a href="/config" class="stretched-link">
            <h3>Configuración</h3>
          </a>
          <p>Próximamente: Panel de configuración del sistema. Gestión de usuarios, permisos y preferencias.</p>
        </div>
      </div>

    </div>
{{!-- yLKCiWcy2rRZ --}}
  </div>
</section>

{{#if isAdmin}}
<div class="modal fade" id="selectDoctorModal" tabindex="-1" aria-labelledby="selectDoctorModalLabel" aria-hidden="true" data-fetch-url="/api/doctores">
  <div class="modal-dialog">
    <form class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="selectDoctorModalLabel">Seleccionar médico</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3 js-doctor-select d-none">
          <label for="doctorGateSelect" class="form-label">Elegí el profesional</label>
          <select id="doctorGateSelect" name="doctorId" class="form-select" disabled required>
            <option value="">Seleccioná un profesional</option>
          </select>
        </div>
        <div class="alert alert-warning mb-0 d-none js-no-doctors" role="alert">
          Todavía no hay médicos cargados en el sistema. Creá al menos uno para acceder a estos módulos.
        </div>
        <div class="alert alert-danger mt-3 d-none js-doctor-error" role="alert"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="submit" class="btn btn-primary js-doctor-submit" disabled>Ir al módulo</button>
      </div>
    </form>
  </div>
</div>

<script src="/js/doctor-gate.js"></script>
{{/if}}
